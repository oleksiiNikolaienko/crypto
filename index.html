<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Crypto Funding</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-5">
    <h1 class="text-2xl font-bold mb-4">Мій Фандінг</h1>
    <div id="status" class="text-sm text-gray-400 mb-2">Завантаження даних...</div>
    <table class="min-w-full bg-gray-800 rounded-lg overflow-hidden">
        <thead class="bg-gray-700">
            <tr>
                <th class="p-3 text-left">Монета</th>
                <th class="p-3 text-left">Біржа</th>
                <th class="p-3 text-left">Ставка</th>
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>

    <script>
        async function loadData() {
            const url = 'https://crypto.olexii-nikolaenko.workers.dev/';
            try {
                const res = await fetch(url);
                const json = await res.json();
                const data = json.data || [];
                
                document.getElementById('table-body').innerHTML = data.map(i => `
                    <tr class="border-b border-gray-700">
                        <td class="p-3 font-bold">${i.symbol}</td>
                        <td class="p-3 text-gray-400">${i.exchangeName}</td>
                        <td class="p-3 ${parseFloat(i.uRate) < 0 ? 'text-red-400' : 'text-green-400'}">
                            ${parseFloat(i.uRate).toFixed(4)}%
                        </td>
                    </tr>
                `).join('');
                document.getElementById('status').innerText = 'Оновлено: ' + new Date().toLocaleTimeString();
            } catch (e) {
                document.getElementById('status').innerText = 'Помилка: ' + e.message;
            }
        }
        loadData();
        setInterval(loadData, 30000);
    </script>
</body>
</html>
